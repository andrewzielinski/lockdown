<?xml version="1.0" encoding="iso-8859-1"?>
<!DOCTYPE html 
     PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
     "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
  <title>File: index.txt</title>
  <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
  <meta http-equiv="Content-Script-Type" content="text/javascript" />
  <link rel="stylesheet" href="../.././rdoc-style.css" type="text/css" media="screen" />
  <script type="text/javascript">
  // <![CDATA[

  function popupCode( url ) {
    window.open(url, "Code", "resizable=yes,scrollbars=yes,toolbar=no,status=no,height=150,width=400")
  }

  function toggleCode( id ) {
    if ( document.getElementById )
      elem = document.getElementById( id );
    else if ( document.all )
      elem = eval( "document.all." + id );
    else
      return false;

    elemStyle = elem.style;
    
    if ( elemStyle.display != "block" ) {
      elemStyle.display = "block"
    } else {
      elemStyle.display = "none"
    }

    return true;
  }
  
  // Make codeblocks hidden by default
  document.writeln( "<style type=\"text/css\">div.method-source-code { display: none }</style>" )
  
  // ]]>
  </script>

</head>
<body>



  <div id="fileHeader">
    <h1>index.txt</h1>
    <table class="header-table">
    <tr class="top-aligned-row">
      <td><strong>Path:</strong></td>
      <td>website/index.txt
      </td>
    </tr>
    <tr class="top-aligned-row">
      <td><strong>Last Update:</strong></td>
      <td>Mon Apr 28 20:16:17 -0400 2008</td>
    </tr>
    </table>
  </div>
  <!-- banner header -->

  <div id="bodyContent">



  <div id="contextContent">

    <div id="description">
      <p>
h1. lockdown
</p>
<p>
h1. &amp;x2192; &#8216;lockdown&#8216;
</p>
<p>
h3. Lockdown has not been officially released! This page is a
Work-In-Progress. The first version will be released by May 1st.
</p>
<p>
h2. What
</p>
<p>
Lockdown is a authentication/authorization system for RubyOnRails and Merb
designed for simplicity and extensibility. All access rules are defined in
lib/lockdown/init.rb. With the included ORM support (ActiveRecord or
DataMapper) and management screens you can add user defined rules to the
system.
</p>
<p>
If there is a &quot;spec&quot; directory, a test helper file will be
included to provied some basic functionality for use with RSpec. This will
show you how to create mock user objects and sign in as an adminstrator.
</p>
<p>
Also included is functionality to auto-populate created_by and updated_by
fields.
</p>
<p>
Some model level access right functionality will also be added in the near
future.
</p>
<p>
h2. Installing
</p>
<p>
For the people who don&#8216;t care to know the details and just want to
get the system installed:
</p>
<p>
&lt;pre&gt; $ sudo gem install lockdown $ cd &lt;your_project_directory&gt;
$ lockdown . &lt;/pre&gt;
</p>
<p>
This will create a &quot;lockdown&quot; directory in the lib dir add two
files: init.rb and session.rb. Modify init.rb to set defaults and define
the rules that apply to your system.
</p>
<p>
If you want the full &#8216;subsystem&#8217; (models, views, controllers,
helpers):
</p>
<p>
&lt;pre&gt; $ cd &lt;your_project_directory&gt; $ ./script/generate
lockdown_all &lt;/pre&gt;
</p>
<p>
I recommend reading this page to get a feel for Lockdown&#8216;s
functionality.
</p>
<p>
h2. How it works
</p>
<p>
Lockdown stores an array of access rights in the session. For example, if
you have a standard REST users controller, the access rights would be:
&lt;pre&gt;
</p>
<pre>
  users/index
  users/show
  users/edit
  users/update
  users/new
  users/create
  users/destroy (delete for Merb)
</pre>
<p>
&lt;/pre&gt;
</p>
<p>
The above list will be stored in the session as an array and each request
is tested against this list. So this means, you &lt;strong&gt;should not
use client side session storage&lt;/strong&gt;. If you can, I recommend
using memcache, but a database session store will suffice.
</p>
<p>
To define access rights you need to modify lib/lockdown/init.rb. This is
the default init.rb included with Lockdown: &lt;pre
syntax=&quot;ruby&quot;&gt;
</p>
<pre>
  require &quot;lockdown&quot;

  module Lockdown
  #
  #
  # Permissions are used to group access rights into logical components.
  # Each method defined in the Permissions module represents an array
  # of methods from a controller (or multiple controllers.)
  #
  # Controller methods available are:
  #
  #   # Returns all methods from all controllers
  #   all_controllers
  #
  #   # Returns all methods from all controllers listed
  #   all_methods :controller1, controller2, ...
  #
  #   # For a single controller, returns only methods listed
  #   only_methods :controller1, :method1, :method2, ...
  #
  #   # For a single controller, returns all methods except the methods listed
  #   all_except_methods :controller1, :method1, :method2, ...
  #
  #   They all return an array of controller/action.  For example, if you had a
  #   standard REST controller called products this would be the result:
  #
  #
  #     all_methods :products  =&gt; [ &quot;products/index , &quot;products/show&quot;,
  #                                 &quot;products/new&quot;, &quot;products/edit&quot;,
  #                                 &quot;products/create&quot;, &quot;products/update&quot;,
  #                                 &quot;products/destroy&quot;]
  #
    module Permissions
      class &lt;&lt; self

        def sessions_management
          # all_methods :sessions
        end

      end # end class block
    end # end Permissions module

  #
  # UserGroups are used to group Permissions together to define role type
  # functionality. Users may belong to multiple groups.
  #
    module UserGroups
      class &lt;&lt; self

        #
        # This method defines which UserGroups cannot be managed
        # via the management screens.
        #
        # Users can still be assigned to these groups.
        #
        def private_records
          [:administrators]
        end
        #
        # This method defines which UserGroups have limited access
        # via the management screens. Deletion is not allowed.
        #
        # Users can still be assigned to these groups.
        #
        def protected_records
          [:public_access, :registered_users]
        end

        # ** The administrator method is &quot;special&quot;, please don't rename.
        #                       If you remove/rename, etc... YOU WILL BREAK STUFF
        #
        # Standard administrator user group.
        # Please don't alter without careful consideration.
        #
        def administrators
          [:all]
        end

        # ** The public_access method is &quot;special&quot;, please don't rename.
        #                       If you remove/rename, etc... YOU WILL BREAK STUFF
        #
        # Standard public_access user group.
        #
        # Feel free to add Permissions to the array without issue.
        #
        # **Notice:  All permissions added to this public_access group will not be
        #             restricted to logged in users.
        #             So be careful what you add here!
        #
        def public_access
          [:sessions_management]
        end

        # ** The registered_users method is &quot;special&quot;, please don't rename.
        #                       Not as special as the others, but still...
        #
        # All newly created users are assigned to this User Group by default
        #
        #  Sample registered_users permission:
        # [:my_account]
        #
        def registered_users
          []
        end

        #
        # Define your own user groups below
        #
      end # end class block
    end # end UserGroups module
  end # end Lockdown module
</pre>
<p>
&lt;/pre&gt;
</p>
<p>
h2. Some History
</p>
<p>
Lockdown was initially designed as a authentication/authorization system to
be configured by system administrators. This means it was database driven
and had an interface to manage the access rights. I didn&#8216;t like the
static methodology of using code scattered amongst the controllers to
define my access rights for the system. I also didn&#8216;t like the fact
that everything was accessible unless you restricted access. So, I designed
Lockdown to restrict access to all resources unless rights have been
granted.
</p>
<p>
The system was nice and worked well until I had a project that required
RSpec tests. I don&#8216;t have anything against testing frameworks (now
that I&#8216;ve see the light) but what bothered me most what the fact that
I would have to duplicate the information I already defined in my
migrations as mock data. I simply refused to do that extra work. So, a
serious refactoring of Lockdown was required.
</p>
<p>
After the RSpec project was completed, the refactoring continued. This time
the focus was on releasing the code to the masses. I like this system a lot
and think both the system itself and the community could benefit from
releasing this as an open source project.
</p>
<p>
In the middle of my refactoring for a public release, I made the decision
to use Merb (when the choice was mine). This meant I needed to modify
Lockdown for use with Merb. So this is what I have done.
</p>
<p>
There is code in place for using Lockdown with Rails, after all,
that&#8216;s where Lockdown was born. However, I have not yet tested the
Rails functionality after this last refactor. In addition, the deployment
mechanism for Rails has to be tested.
</p>
<p>
Writing code for public release is difficult and much different from
architecting/coding for a closed source project. A lot of things you could
get by with in a proprietary application won&#8216;t be well received by
the general public. In addition, if you don&#8216;t make things easy, the
adoption rate will probably be non-existent.
</p>
<p>
h2. Forum
</p>
<p>
If you are having a problem understanding how to use Lockdown, please post
your question on the lockdown group. If it&#8216;s documentation related, I
will keep this page updated to help everyone.
</p>
<p>
&quot;<a
href="http://groups.google.com/group/stonean_lockdown?hl=en":http://groups.google.com/group/stonean_lockdown?hl=en">groups.google.com/group/stonean_lockdown?hl=en":http://groups.google.com/group/stonean_lockdown?hl=en</a>
</p>
<p>
h2. How to submit patches
</p>
<p>
The Clone URL: git://github.com/stonean/lockdown.git
</p>
<p>
Read the &quot;8 steps for fixing other people&#8216;s code&quot;:<a
href="http://drnicwilliams.com/2007/06/01/8-steps-for-fixing-other-peoples-code">drnicwilliams.com/2007/06/01/8-steps-for-fixing-other-peoples-code</a>/
and for section &quot;8b: Submit patch to Google Groups&quot;:<a
href="http://drnicwilliams.com/2007/06/01/8-steps-for-fixing-other-peoples-code/#8b-google-groups">drnicwilliams.com/2007/06/01/8-steps-for-fixing-other-peoples-code/#8b-google-groups</a>,
use the Google Group above.
</p>
<p>
I&#8216;m new to git and this whole opensource project admin gig, so please
be patient with my stumbling around.
</p>
<p>
h2. License
</p>
<p>
This code is free to use under the terms of the MIT license.
</p>
<p>
h2. Contact
</p>
<p>
Comments and suggestions are welcome via the &quot;forum&quot;:<a
href="http://groups.google.com/group/stonean_lockdown?hl=en">groups.google.com/group/stonean_lockdown?hl=en</a>
</p>

    </div>


   </div>


  </div>


    <!-- if includes -->

    <div id="section">





      


    <!-- if method_list -->


  </div>


<div id="validator-badges">
  <p><small><a href="http://validator.w3.org/check/referer">[Validate]</a></small></p>
</div>

</body>
</html>